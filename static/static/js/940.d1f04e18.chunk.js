"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[940],{940:function(e,s,a){a.r(s);var n=a(4942),r=a(1413),t=a(8152),c=a(3504),o=a(9434),i=a(2791),l=a(7651),u=a(8890),d=a.n(u),p=a(3700),m=a(393),f=a(5779),h=a(4657),g=a(184);s.default=function(){var e=(0,o.I0)(),s=(0,o.v9)((function(e){return e.user})),a=s.access_token,u=s.user_info,x=u.first_name,j=u.last_name,_=u.email_address,b=u.profile_picture,v=(0,o.v9)((function(e){return e.app_data.base_url})),N=(0,o.v9)((function(e){return e.app_data.api_base_url})),w=(0,o.v9)((function(e){return e.user.user_info.id})),y=(0,i.useRef)(),C=(0,i.useRef)(),S=(0,i.useRef)(),T=(0,i.useRef)(),H=(0,i.useRef)(),k=(0,i.useState)({first_name:x,last_name:j,email_address:_}),J=(0,t.Z)(k,2),L=J[0],Z=J[1],M=(0,i.useState)({current_password:"",new_password:"",confirm_new_password:""}),P=(0,t.Z)(M,2),R=P[0],A=P[1],E=(0,i.useState)(""),V=(0,t.Z)(E,2),q=V[0],D=V[1],O=function(e){Z((0,r.Z)((0,r.Z)({},L),{},(0,n.Z)({},e.target.name,e.target.value)))},U=function(e){A((0,r.Z)((0,r.Z)({},R),{},(0,n.Z)({},e.target.name,e.target.value)))};return(0,i.useEffect)((function(){e(l.F_.set_dashboard_navbar_active("settings"))}),[e]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("input",{type:"file",style:{display:"none"},ref:H,onChange:function(s){var n=(0,t.Z)(s.target.files,1)[0];if(n){y.current.innerHTML='<span class="fas fa-spinner fa-spin"></span> Uploading...';var r=new FormData;r.append("picture",n),d().ajax({type:"PATCH",url:"".concat(N,"/users/picture"),data:r,contentType:!1,processData:!1,headers:{Authorization:"Bearer ".concat(a)},success:function(s){e(l.JV.login({access_token:a,user_info:s.user})),D("Picture updated successfully"),y.current.innerHTML="Upload",H.current.value=null},statusCode:{406:function(e){var s=e.responseJSON.message;D(s),y.current.innerHTML="Upload"},401:function(){e(l.JV.logout())}}})}}}),(0,g.jsxs)("div",{className:"modal ".concat(q&&"modal-open"),children:[(0,g.jsxs)("div",{className:"modal-header",children:["Info",(0,g.jsx)("span",{onClick:function(){return D("")},children:"\xd7"})]}),(0,g.jsx)("div",{className:"modal-body",children:q})]}),(0,g.jsxs)("main",{className:"dashboard-container",children:[(0,g.jsx)(p.Z,{}),(0,g.jsxs)("div",{className:"dashboard-content",children:[(0,g.jsx)(m.Z,{}),(0,g.jsxs)("section",{className:"dashboard-main",children:[(0,g.jsxs)("div",{className:"dashboard-breadcrumb",children:[(0,g.jsxs)("div",{className:"dashboard-breadcrumb-left",children:[(0,g.jsx)("h3",{className:"dashboard-breadcrumb-title",children:"Settings"}),(0,g.jsx)("p",{className:"dashboard-breadcrumb-text",children:"Edit your profile information"})]}),(0,g.jsx)("div",{className:"dashboard-breadcrumb-right",children:(0,g.jsxs)(c.rU,{to:"/logout",className:"dashboard-breadcrumb-link",children:[(0,g.jsx)("ion-icon",{name:"log-out-outline"})," ","Logout"]})})]}),(0,g.jsxs)("div",{className:"profile-edit",children:[(0,g.jsx)("img",{src:b?"".concat(v,"dc/").concat(w,"/").concat(b):h,className:"profile-image",alt:""}),(0,g.jsx)("button",{className:"settings-btn-1",ref:y,onClick:function(){return H.current.click()},children:"Upload"}),(0,g.jsx)("button",{className:"settings-btn-2",ref:C,onClick:function(){C.current.innerHTML='<span class="fas fa-spinner fa-spin"></span> Removing',d().ajax({type:"PATCH",url:"".concat(N,"/users/picture"),headers:{Authorization:"Bearer ".concat(a)},success:function(s){e(l.JV.login({access_token:a,user_info:s.user})),D("Picture removed successfully"),C.current.innerHTML="Remove"},statusCode:{401:function(){e(l.JV.logout())}}})},children:"Remove"})]}),(0,g.jsxs)("form",{className:"info-edit",onSubmit:function(s){s.preventDefault(),S.current.innerHTML='<span class="fas fa-spinner fa-spin"></span> Saving',d().ajax({type:"PATCH",data:JSON.stringify(L),contentType:"application/json",processData:!1,url:"".concat(N,"/users/info"),headers:{Authorization:"Bearer ".concat(a)},success:function(s){e(l.JV.login({access_token:a,user_info:s.user})),D(s.message),S.current.innerHTML="Save"},statusCode:{406:function(e){var s=e.responseJSON.message;D(s),S.current.innerHTML="Save"},401:function(){e(l.JV.logout())}}}),s.stopPropagation()},children:[(0,g.jsxs)("div",{className:"info-form-group",children:[(0,g.jsx)("label",{className:"contact-form-label",children:"First Name"}),(0,g.jsx)("input",{type:"text",name:"first_name",className:"contact-form-input",placeholder:"Enter first name",required:!0,value:L.first_name,onChange:O})]}),(0,g.jsxs)("div",{className:"info-form-group",children:[(0,g.jsx)("label",{className:"contact-form-label",children:"Last Name"}),(0,g.jsx)("input",{type:"text",name:"last_name",className:"contact-form-input",placeholder:"Enter last name",required:!0,value:L.last_name,onChange:O})]}),(0,g.jsxs)("div",{className:"info-form-group",children:[(0,g.jsx)("label",{className:"contact-form-label",children:"Email Address"}),(0,g.jsx)("input",{type:"email",name:"email_address",className:"contact-form-input",placeholder:"Enter email address",required:!0,value:L.email_address,onChange:O})]}),(0,g.jsx)("button",{className:"settings-btn-1",ref:S,children:"Save"})]}),(0,g.jsxs)("form",{className:"info-edit",onSubmit:function(s){s.preventDefault(),T.current.innerHTML='<span class="fas fa-spinner fa-spin"></span> Saving',d().ajax({type:"PATCH",data:JSON.stringify(R),contentType:"application/json",processData:!1,url:"".concat(N,"/users/password"),headers:{Authorization:"Bearer ".concat(a)},success:function(s){e(l.JV.login({access_token:a,user_info:s.user})),A({current_password:"",new_password:"",confirm_new_password:""}),D(s.message),T.current.innerHTML="Save"},statusCode:{406:function(e){var s=e.responseJSON.message;D(s),T.current.innerHTML="Save"},401:function(){e(l.JV.logout())}}}),s.stopPropagation()},children:[(0,g.jsxs)("div",{className:"info-form-group",children:[(0,g.jsx)("label",{className:"contact-form-label",children:"Current Password"}),(0,g.jsx)("input",{type:"password",name:"current_password",className:"contact-form-input",placeholder:"Enter current password",required:!0,value:R.current_password,onChange:U})]}),(0,g.jsxs)("div",{className:"info-form-group",children:[(0,g.jsx)("label",{className:"contact-form-label",children:"New Password"}),(0,g.jsx)("input",{type:"password",name:"new_password",className:"contact-form-input",placeholder:"Enter new password",required:!0,value:R.new_password,onChange:U})]}),(0,g.jsxs)("div",{className:"info-form-group",children:[(0,g.jsx)("label",{className:"contact-form-label",children:"Retype New Password"}),(0,g.jsx)("input",{type:"password",name:"confirm_new_password",className:"contact-form-input",placeholder:"Retype new password",required:!0,value:R.confirm_new_password,onChange:U})]}),(0,g.jsx)("button",{className:"settings-btn-1",ref:T,children:"Save"})]})]}),(0,g.jsx)(f.Z,{})]})]})]})}}}]);
//# sourceMappingURL=940.d1f04e18.chunk.js.map
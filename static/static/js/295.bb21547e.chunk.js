"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[295],{1295:function(e,a,n){n.r(a);var s=n(8152),i=n(9434),l=n(6871),t=n(2791),c=n(8890),r=n.n(c),d=n(7651),o=n(3700),h=n(393),u=n(5779),f=n(184);a.default=function(){var e=(0,l.UO)().operation_id,a=(0,i.I0)(),n=(0,i.v9)((function(e){return e.app_data.api_base_url})),c=(0,i.v9)((function(e){return e.user.access_token})),m=(0,i.v9)((function(e){return e.app_data.base_url})),x=(0,i.v9)((function(e){return e.user.user_info.id})),j=(0,t.useState)(!0),b=(0,s.Z)(j,2),g=b[0],p=b[1],_=(0,t.useState)(""),v=(0,s.Z)(_,2),N=v[0],k=v[1],w=(0,t.useRef)(),y=(0,t.useState)(!1),C=(0,s.Z)(y,2),S=C[0],Z=C[1],R=(0,t.useState)(null),A=(0,s.Z)(R,2),E=A[0],H=A[1],T=(0,t.useState)(""),D=(0,s.Z)(T,2),F=D[0],z=D[1],B=(0,t.useState)(""),J=(0,s.Z)(B,2),L=J[0],M=J[1],O=function(e,a){H(e),z(a),Z(!0)};return(0,t.useEffect)((function(){r().ajax({type:"GET",url:"".concat(n,"/operations/search_highlight/").concat(e),headers:{Authorization:"Bearer ".concat(c)},success:function(e){k(e.data),p(!1)},statusCode:{401:function(){a(d.JV.logout())},404:function(){p(!1)}}})}),[c,n,a,e]),g?(0,f.jsxs)("div",{className:"preloader",children:[(0,f.jsx)("span",{className:"fas fa-spinner fa-spin"})," Fetching file contents"]}):N?(0,f.jsxs)(f.Fragment,{children:[S&&(0,f.jsxs)("div",{className:"modal modal-open",children:[(0,f.jsxs)("div",{className:"modal-header",children:["Rename File"," ",(0,f.jsx)("span",{onClick:function(){Z(!1),H(null),z("")},children:"\xd7"})]}),(0,f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w.current.innerHTML='<span class="fas fa-spinner fa-spin"></span> Renaming file',r().ajax({type:"PATCH",url:"".concat(n,"/files/").concat(E,"?new_filename=").concat(F),headers:{Authorization:"Bearer ".concat(c)},success:function(){window.location.reload()},statusCode:{406:function(e){var a=e.responseJSON;M(a.message),w.current.innerHTML="Rename"}}}),e.stopPropagation()},children:[(0,f.jsxs)("div",{className:"modal-body",style:{textAlign:"left"},children:[(0,f.jsx)("label",{className:"modal-label",children:"New name"}),(0,f.jsx)("input",{type:"text",className:"modal-input",placeholder:"Enter new file name",value:F,onChange:function(e){return z(e.target.value)}})]}),(0,f.jsxs)("div",{className:"modal-footer",style:{textAlign:"right"},children:[L,"\xa0\xa0\xa0\xa0",(0,f.jsx)("button",{className:"modal-btn",ref:w,children:"Rename"})]})]})]}),(0,f.jsxs)("main",{className:"dashboard-container",children:[(0,f.jsx)(o.Z,{}),(0,f.jsxs)("div",{className:"dashboard-content",children:[(0,f.jsx)(h.Z,{}),(0,f.jsxs)("section",{className:"dashboard-main",children:[(0,f.jsxs)("div",{className:"dashboard-breadcrumb",children:[(0,f.jsxs)("div",{className:"dashboard-breadcrumb-left",children:[(0,f.jsx)("h3",{className:"dashboard-breadcrumb-title",children:"Search and Highlight"}),(0,f.jsx)("p",{className:"dashboard-breadcrumb-text",children:"A search and highlight operation performed by you"})]}),(0,f.jsx)("div",{className:"dashboard-breadcrumb-right"})]}),(0,f.jsx)("div",{className:"files-preview mb-3",children:(0,f.jsxs)("div",{className:"file",children:[(0,f.jsxs)("div",{className:"file-header",children:[(0,f.jsx)("h3",{className:"file-name",children:N.file_details.file_name}),(0,f.jsxs)("div",{className:"file-action-btns",children:[(0,f.jsx)("button",{className:"change-file-btn",onClick:function(){return O(N.file_details.id,N.file_details.file_name)},children:"Rename"}),(0,f.jsx)("a",{href:"".concat(m,"dc/").concat(x,"/").concat(N.file_details.file_name),target:"_new",className:"change-file-btn",children:"Download"})]})]}),(0,f.jsx)("div",{className:"file-preview-box",children:(0,f.jsxs)("table",{className:"file-table",children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:N.file_details.file_content[0].map((function(e,a){return(0,f.jsx)("th",{style:{backgroundColor:"#".concat(e.background)},children:e.value},a)}))})}),(0,f.jsx)("tbody",{children:N.file_details.file_content.slice(1).map((function(e,a){return(0,f.jsx)("tr",{children:e.map((function(e,a){return(0,f.jsx)("td",{style:{backgroundColor:"#".concat(e.background)},children:e.value},a)}))},a)}))})]})})]})}),(0,f.jsx)("div",{className:"files-preview",children:(0,f.jsxs)("div",{className:"file",children:[(0,f.jsxs)("div",{className:"file-header",children:[(0,f.jsx)("h3",{className:"file-name",children:N.highlighted_file_details.file_name}),(0,f.jsxs)("div",{className:"file-action-btns",children:[(0,f.jsx)("button",{className:"change-file-btn",onClick:function(){return O(N.highlighted_file_details.id,N.highlighted_file_details.file_name)},children:"Rename"}),(0,f.jsx)("a",{href:"".concat(m,"dc/").concat(x,"/").concat(N.highlighted_file_details.file_name),target:"_new",className:"change-file-btn",children:"Download"})]})]}),(0,f.jsx)("div",{className:"file-preview-box",children:(0,f.jsxs)("table",{className:"file-table",children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:N.highlighted_file_details.file_content[0].map((function(e,a){return(0,f.jsx)("th",{style:{backgroundColor:"#".concat(e.background)},children:e.value},a)}))})}),(0,f.jsx)("tbody",{children:N.highlighted_file_details.file_content.slice(1).map((function(e,a){return(0,f.jsx)("tr",{children:e.map((function(e,a){return(0,f.jsx)("td",{style:{backgroundColor:"#".concat(e.background)},children:e.value},a)}))},a)}))})]})})]})})]}),(0,f.jsx)(u.Z,{})]})]})]}):(0,f.jsx)("div",{className:"preloader",children:"Error fetching file"})}}}]);
//# sourceMappingURL=295.bb21547e.chunk.js.map
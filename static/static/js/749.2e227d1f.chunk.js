"use strict";(self.webpackChunkfrontend_react=self.webpackChunkfrontend_react||[]).push([[749],{5749:function(e,a,s){s.r(a);var n=s(8152),o=s(2791),l=s(9434),i=s(6871),c=s(8890),r=s.n(c),t=s(7651),d=s(3700),u=s(393),f=s(5779),p=s(184);a.default=function(){var e=(0,l.I0)(),a=(0,i.s0)(),s=(0,l.v9)((function(e){return e.app_data.api_base_url})),c=(0,l.v9)((function(e){return e.user.access_token})),m=(0,o.useRef)(),h=(0,o.useState)(""),x=(0,n.Z)(h,2),v=x[0],j=x[1],b=(0,o.useState)(""),N=(0,n.Z)(b,2),g=N[0],D=N[1],_=(0,o.useState)(!1),k=(0,n.Z)(_,2),w=k[0],y=k[1],C=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;j(!0);var l=(0,n.Z)(m.current.files,1),i=l[0],d=new FormData;d.append("file",i),r().ajax({type:"POST",data:d,url:"".concat(s,"/files/?replace=").concat(o),contentType:!1,processData:!1,headers:{Authorization:"Bearer ".concat(c)},success:function(e){a("/new_operation/".concat(e.file.id))},statusCode:{401:function(){e(t.JV.logout())},406:function(e){var a=e.responseJSON;"Unaccepted file format"===a.message?(j(!1),m.current.value=null,D(a.message)):"File exists with the same name"===a.message&&y(!0)}}})};return(0,o.useEffect)((function(){e(t.F_.set_dashboard_navbar_active("new_file"))}),[e]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"file",style:{display:"none"},ref:m,onChange:function(e){(0,n.Z)(e.target.files,1)[0]&&(m.current.files=e.target.files,C())}}),(0,p.jsxs)("div",{className:"modal ".concat(w&&"modal-open"),children:[(0,p.jsxs)("div",{className:"modal-header",children:["File exists ",(0,p.jsx)("span",{children:"\xd7"})]}),(0,p.jsx)("div",{className:"modal-body",children:"You've already uploaded a file with the same name. Do you want to replace?"}),(0,p.jsxs)("div",{className:"modal-footer",children:[(0,p.jsx)("button",{className:"modal-btn",onClick:function(){y(!1),C(1)},children:"Yes"}),(0,p.jsx)("button",{className:"modal-btn",onClick:function(){y(!1),j(!1),m.current.value=null},children:"No"})]})]}),(0,p.jsxs)("div",{className:"modal ".concat(g&&"modal-open"),children:[(0,p.jsxs)("div",{className:"modal-header",children:["Upload Message",(0,p.jsx)("span",{onClick:function(){return D("")},children:"\xd7"})]}),(0,p.jsx)("div",{className:"modal-body",children:g})]}),(0,p.jsxs)("main",{className:"dashboard-container",children:[(0,p.jsx)(d.Z,{}),(0,p.jsxs)("div",{className:"dashboard-content",children:[(0,p.jsx)(u.Z,{}),(0,p.jsxs)("section",{className:"dashboard-main",children:[(0,p.jsxs)("div",{className:"dashboard-breadcrumb",children:[(0,p.jsxs)("div",{className:"dashboard-breadcrumb-left",children:[(0,p.jsx)("h3",{className:"dashboard-breadcrumb-title",children:"Add New File"}),(0,p.jsx)("p",{className:"dashboard-breadcrumb-text",children:"Upload a file to perform operation on"})]}),(0,p.jsx)("div",{className:"dashboard-breadcrumb-right"})]}),(0,p.jsx)("div",{children:(0,p.jsxs)("p",{className:"upload-info-div",children:[(0,p.jsx)("strong",{children:"Note:"})," Uploaded csv files would be converted to excel file"]})}),(0,p.jsxs)("div",{className:"upload-file-box",onClick:function(){m.current.click()},onDragEnter:function(e){e.preventDefault(),e.stopPropagation()},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragLeave:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){e.stopPropagation(),e.preventDefault();var a=e.dataTransfer;(0,n.Z)(a.files,1)[0]&&(m.current.files=a.files,C())},children:[(0,p.jsx)("div",{className:"upload-icon-box",children:(0,p.jsx)("ion-icon",{name:"cloud-upload-outline",class:"upload-icon"})}),(0,p.jsx)("div",{className:"upload-info1",children:"Drag and Drop your file here"}),(0,p.jsx)("div",{className:"upload-info1",children:"Or"}),(0,p.jsx)("div",{className:"upload-info2",children:"Click to browse your files"}),(0,p.jsxs)("div",{className:"upload-info",children:[(0,p.jsx)("ion-icon",{name:"document-text-outline",class:"upload-file-icon"}),(0,p.jsx)("ion-icon",{name:"documents-outline",class:"upload-file-icon"}),(0,p.jsx)("p",{children:"You can upload CSV or Excel Files"})]})]}),v&&(0,p.jsxs)("div",{className:"upload-progress",children:[(0,p.jsx)("span",{className:"fas fa-spinner fa-spin"})," ","Uploading..."]})]}),(0,p.jsx)(f.Z,{})]})]})]})}}}]);
//# sourceMappingURL=749.2e227d1f.chunk.js.map
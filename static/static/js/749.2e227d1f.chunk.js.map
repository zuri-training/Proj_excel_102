{"version":3,"file":"static/js/749.2e227d1f.chunk.js","mappings":"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","sources":["pages/AddNewFile.js"],"sourcesContent":["import { useRef, useState, useEffect } from \"react\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport $ from \"jquery\";\r\n\r\nimport { user_actions, app_data_actions } from \"../store\";\r\n\r\nimport DashboardSidebar from \"../components/DashboardSidebar\";\r\nimport DashboardHeader from \"../components/DashboardHeader\";\r\nimport DashboardFooter from \"../components/DashboardFooter\";\r\n\r\nconst AddNewFile = () => {\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n\r\n    const api_base_url = useSelector((state) => state.app_data.api_base_url);\r\n    const access_token = useSelector((state) => state.user.access_token);\r\n\r\n    const file_input_ref = useRef();\r\n\r\n    const [upload_progress, set_upload_progress] = useState(\"\");\r\n\r\n    const [upload_message, set_upload_message] = useState(\"\");\r\n    const [fe_modal_open, set_fe_modal_open] = useState(false);\r\n\r\n    const handleUploadBoxClick = () => {\r\n        file_input_ref.current.click();\r\n    };\r\n\r\n    const doUpload = (replace = 0) => {\r\n        set_upload_progress(true);\r\n\r\n        const [file] = file_input_ref.current.files;\r\n\r\n        const form_data = new FormData();\r\n\r\n        form_data.append(\"file\", file);\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            data: form_data,\r\n            url: `${api_base_url}/files/?replace=${replace}`,\r\n            contentType: false,\r\n            processData: false,\r\n            headers: {\r\n                Authorization: `Bearer ${access_token}`,\r\n            },\r\n            success: function (data) {\r\n                navigate(`/new_operation/${data.file.id}`);\r\n            },\r\n            statusCode: {\r\n                401: function () {\r\n                    dispatch(user_actions.logout());\r\n                },\r\n                406: function ({ responseJSON: response }) {\r\n                    if (response.message === \"Unaccepted file format\") {\r\n                        set_upload_progress(false);\r\n                        file_input_ref.current.value = null;\r\n                        set_upload_message(response.message);\r\n                    } else if (\r\n                        response.message === \"File exists with the same name\"\r\n                    ) {\r\n                        set_fe_modal_open(true);\r\n                    }\r\n                },\r\n            },\r\n        });\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        const [file] = e.target.files;\r\n\r\n        if (file) {\r\n            file_input_ref.current.files = e.target.files;\r\n            doUpload();\r\n        }\r\n    };\r\n\r\n    const handleDragEnter = (e) => {\r\n        e.preventDefault();\r\n        // e.target.classList.add(\"upload-file-box-active\");\r\n        e.stopPropagation();\r\n    };\r\n\r\n    const handleDragOver = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    };\r\n\r\n    const handleDragLeave = (e) => {\r\n        e.preventDefault();\r\n        // e.target.classList.remove(\"upload-file-box-active\");\r\n        e.stopPropagation();\r\n    };\r\n\r\n    const handleDrop = (e) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n\r\n        const dt = e.dataTransfer;\r\n\r\n        const [file] = dt.files;\r\n\r\n        if (file) {\r\n            file_input_ref.current.files = dt.files;\r\n            doUpload();\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        dispatch(app_data_actions.set_dashboard_navbar_active(\"new_file\"));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <>\r\n            <input\r\n                type=\"file\"\r\n                style={{ display: \"none\" }}\r\n                ref={file_input_ref}\r\n                onChange={handleFileChange}\r\n            />\r\n            <div className={`modal ${fe_modal_open && \"modal-open\"}`}>\r\n                <div className=\"modal-header\">\r\n                    File exists <span>&times;</span>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    You've already uploaded a file with the same name. Do you\r\n                    want to replace?\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                    <button\r\n                        className=\"modal-btn\"\r\n                        onClick={() => {\r\n                            set_fe_modal_open(false);\r\n                            doUpload(1);\r\n                        }}\r\n                    >\r\n                        Yes\r\n                    </button>\r\n                    <button\r\n                        className=\"modal-btn\"\r\n                        onClick={() => {\r\n                            set_fe_modal_open(false);\r\n                            set_upload_progress(false);\r\n                            file_input_ref.current.value = null;\r\n                        }}\r\n                    >\r\n                        No\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div className={`modal ${upload_message && \"modal-open\"}`}>\r\n                <div className=\"modal-header\">\r\n                    Upload Message\r\n                    <span onClick={() => set_upload_message(\"\")}>&times;</span>\r\n                </div>\r\n                <div className=\"modal-body\">{upload_message}</div>\r\n            </div>\r\n            <main className=\"dashboard-container\">\r\n                <DashboardSidebar />\r\n                <div className=\"dashboard-content\">\r\n                    <DashboardHeader />\r\n                    <section className=\"dashboard-main\">\r\n                        <div className=\"dashboard-breadcrumb\">\r\n                            <div className=\"dashboard-breadcrumb-left\">\r\n                                <h3 className=\"dashboard-breadcrumb-title\">\r\n                                    Add New File\r\n                                </h3>\r\n                                <p className=\"dashboard-breadcrumb-text\">\r\n                                    Upload a file to perform operation on\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"dashboard-breadcrumb-right\"></div>\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"upload-info-div\">\r\n                                <strong>Note:</strong> Uploaded csv files would\r\n                                be converted to excel file\r\n                            </p>\r\n                        </div>\r\n                        <div\r\n                            className=\"upload-file-box\"\r\n                            onClick={handleUploadBoxClick}\r\n                            onDragEnter={handleDragEnter}\r\n                            onDragOver={handleDragOver}\r\n                            onDragLeave={handleDragLeave}\r\n                            onDrop={handleDrop}\r\n                        >\r\n                            <div className=\"upload-icon-box\">\r\n                                <ion-icon\r\n                                    name=\"cloud-upload-outline\"\r\n                                    class=\"upload-icon\"\r\n                                ></ion-icon>\r\n                            </div>\r\n                            <div className=\"upload-info1\">\r\n                                Drag and Drop your file here\r\n                            </div>\r\n                            <div className=\"upload-info1\">Or</div>\r\n                            <div className=\"upload-info2\">\r\n                                Click to browse your files\r\n                            </div>\r\n                            <div className=\"upload-info\">\r\n                                <ion-icon\r\n                                    name=\"document-text-outline\"\r\n                                    class=\"upload-file-icon\"\r\n                                ></ion-icon>\r\n                                <ion-icon\r\n                                    name=\"documents-outline\"\r\n                                    class=\"upload-file-icon\"\r\n                                ></ion-icon>\r\n                                <p>You can upload CSV or Excel Files</p>\r\n                            </div>\r\n                        </div>\r\n                        {upload_progress && (\r\n                            <div className=\"upload-progress\">\r\n                                <span className=\"fas fa-spinner fa-spin\"></span>{\" \"}\r\n                                Uploading...\r\n                            </div>\r\n                        )}\r\n                    </section>\r\n                    <DashboardFooter />\r\n                </div>\r\n            </main>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default AddNewFile;\r\n"],"names":["dispatch","useDispatch","navigate","useNavigate","api_base_url","useSelector","state","app_data","access_token","user","file_input_ref","useRef","useState","upload_progress","set_upload_progress","upload_message","set_upload_message","fe_modal_open","set_fe_modal_open","doUpload","replace","current","files","file","form_data","FormData","append","$","type","data","url","contentType","processData","headers","Authorization","success","id","statusCode","user_actions","response","responseJSON","message","value","useEffect","app_data_actions","style","display","ref","onChange","e","target","className","onClick","click","onDragEnter","preventDefault","stopPropagation","onDragOver","onDragLeave","onDrop","dt","dataTransfer","name","class"],"sourceRoot":""}